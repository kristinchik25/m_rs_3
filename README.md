# m_rs_3
# Практическое задание №3. Асинхронное взаимодействие через RabbitMQ
## Разработайте систему обработки заказов с асинхронным взаимодействием через брокер сообщений.
### Требуется реализовать:
* Producer для отправки заказов в очередь RabbitMQ
* Consumer для обработки заказов из очереди (имитация обработки: sleep 2 сек)
* Docker Compose конфигурацию для запуска RabbitMQ
* Структуру JSON сообщения: order_id, customer, amount, status
### Проанализировать:
* Время обработки 5 заказов
* Надежность доставки (роль basic_ack)
* Преимущества асинхронности над синхронными вызовами
### Формат сдачи: producer.py, consumer.py, docker-compose.yml 

## Ход работы
## 1. Сначала создаем producer.py, consumer.py, docker-compose.yml  для дальнейшей работы
<img width="110" height="68" alt="image" src="https://github.com/user-attachments/assets/80e0e65a-d118-4fa1-a110-3d7982650778" />

В docker-compose.yml появятся в файле кнопки плей, запускаем.
<img width="748" height="378" alt="image" src="https://github.com/user-attachments/assets/4452963a-fb0b-473c-9725-af9a954107cd" />

## 2. Далее по шагам в терминале выполняем команды
устанавливаем Python-библиотеку для работы с RabbitMQ
```
pip install pika
```
Запускаем RabbitMQ
```
docker-compose up -d
```
<img width="500" height="44" alt="image" src="https://github.com/user-attachments/assets/2dff2ad6-a48d-4730-890c-09d42cf47803" />

## 3. В одном терминале делаем запуск consumer
Запускаем consumer, принимает заказы в формате JSON и имитирует их обработку с задержкой 2 секунды
```
python3 consumer.py
```
<img width="507" height="161" alt="image" src="https://github.com/user-attachments/assets/037d959b-ee80-4c9a-a0be-da37fbb018cc" />

## 4. В другом отправка заказов
Отправляет заказы в очередь RabbitMQ в формате JSON (с полями `order_id`, `customer`, `amount`, `status`), инициируя асинхронную обработку 
```
python3 producer.py
```
<img width="429" height="67" alt="image" src="https://github.com/user-attachments/assets/e562b794-fa65-44d6-a372-96753e63cf8a" />


# Вывод
В ходе работы реализована асинхронная система обработки заказов через RabbitMQ, producer отправляет заказы в очередь, consumer обрабатывает их с задержкой 2 секунды. Использование Docker Compose упростило запуск брокера, а подтверждения (basic_ack) обеспечивают надёжную доставку.
## Анализ
### 1. Время обработки 5 заказов
* При одном consumer: ~10 секунд (5 × 2 сек).
* При нескольких consumer  параллельная обработка уменьшает общее время.
* Благодаря basic_qos(prefetch_count=1), RabbitMQ не перегружает один consumer.
* ### 2. Надёжность доставки и basic_ack
* Без basic_ack сообщение считается потерянным при падении consumer и возвращается в очередь.
* С basic_ack гарантируется, что сообщение обработано только после завершения.
* delivery_mode=2 делает сообщение persistent, чтобы оно не исчезло при перезапуске RabbitMQ.
### 3. Преимущества асинхронности над синхронными вызовами
* Масштабируемость: producer не ждёт ответа, может отправлять тысячи заказов мгновенно.
* Отказоустойчивость: если consumer упал — сообщения остаются в очереди.
* Разделение ответственности: компоненты слабо связаны, легко масштабируются независимо.
* Пиковая нагрузка: система выдерживает всплески трафика за счёт буферизации в очереди.
